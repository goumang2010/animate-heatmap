{"version":3,"sources":["webpack:///webpack/bootstrap fb53971357d2ffa30df3","webpack:///./src/index.js"],"names":["defaultOptions","blurSize","gradientColors","offset","color","minAlpha","valueScale","opacity","BRUSH_SIZE","GRADIENT_LEVELS","Heatmap","opt","option","cache","i","undefined","prototype","getCanvas","data","width","height","brush","_getBrush","gradient","_getGradient","r","canvas","document","createElement","ctx","getContext","len","length","p","x","y","value","alpha","Math","min","max","globalAlpha","drawImage","imageData","getImageData","pixels","id","colorOffset","floor","putImageData","getCanvasData","_cache","d","map","v","key","refreshCanvas","dx","dy","ceil","clearRect","maxX","maxY","_brushCanvas","DEFAULT_D","shadowOffsetX","shadowBlur","shadowColor","beginPath","arc","PI","closePath","fill","_gradientPixels","levels","createLinearGradient","addColorStop","fillStyle","fillRect","setCanvasBackground","a","g","b"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fb53971357d2ffa30df3","/**\r\n * @file defines echarts Heatmap Chart\r\n * @author Ovilia (me@zhangwenli.com)\r\n * Inspired by https://github.com/mourner/simpleheat\r\n *\r\n * @module\r\n */\r\n\r\nvar defaultOptions = {\r\n    blurSize: 30,\r\n\r\n    // gradientColors is either shaped of ['blue', 'cyan', 'lime', 'yellow', 'red']\r\n    // or [{\r\n    //    offset: 0.2,\r\n    //    color: 'blue'\r\n    // }, {\r\n    //    offset 0.8,\r\n    //    color: 'cyan'\r\n    // }]\r\n    // gradientColors: ['black', 'blue', 'cyan', 'lime', 'yellow', 'yellow', 'red', 'red'],\r\n    gradientColors: [{\r\n        offset: 0,\r\n        color: 'black'\r\n    }, {\r\n        offset: 0.1,\r\n        color: 'blue'\r\n    }, {\r\n        offset: 0.2,\r\n        color: 'cyan'\r\n    }, {\r\n        offset: 0.5,\r\n        color: 'lime'\r\n    }, {\r\n        offset: 0.8,\r\n        color: 'yellow'\r\n    }, {\r\n        offset: 1,\r\n        color: 'red'\r\n    }],\r\n    minAlpha: 0.05,\r\n    valueScale: 1,\r\n    opacity: 1\r\n};\r\n\r\nvar BRUSH_SIZE = 28;\r\nvar GRADIENT_LEVELS = 256;\r\n\r\n/**\r\n * Heatmap Chart\r\n *\r\n * @class\r\n * @param {Object} opt options\r\n */\r\nfunction Heatmap(opt) {\r\n    this.option = opt;\r\n    this.cache = {};\r\n    if (opt) {\r\n        for (var i in defaultOptions) {\r\n            if (opt[i] !== undefined) {\r\n                this.option[i] = opt[i];\r\n            } else {\r\n                this.option[i] = defaultOptions[i];\r\n            }\r\n        }\r\n    } else {\r\n        this.option = defaultOptions;\r\n    }\r\n}\r\n\r\nHeatmap.prototype = {\r\n    /**\r\n     * Renders Heatmap and returns the rendered canvas\r\n     * @param {Array} [x, y, value] array of data\r\n     * @param {number} canvas width\r\n     * @param {number} canvas height\r\n     * @return {Object} rendered canvas\r\n     */\r\n    getCanvas: function (data, width, height) {\r\n        this.data = data;\r\n        var brush = this._getBrush();\r\n        var gradient = this._getGradient();\r\n        var r = BRUSH_SIZE + this.option.blurSize;\r\n\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        var ctx = canvas.getContext('2d');\r\n\r\n        var len = data.length;\r\n        for (var i = 0; i < len; ++i) {\r\n            var p = data[i];\r\n            var x = p[0];\r\n            var y = p[1];\r\n            var value = p[2];\r\n\r\n            // calculate alpha using value\r\n            var alpha = Math.min(1, Math.max(value * this.option.valueScale ||\r\n                this.option.minAlpha, this.option.minAlpha));\r\n\r\n            // draw with the circle brush with alpha\r\n            ctx.globalAlpha = alpha;\r\n            ctx.drawImage(brush, x - r, y - r);\r\n        }\r\n\r\n        // colorize the canvas using alpha value and set with gradient\r\n        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        var pixels = imageData.data;\r\n        var len = pixels.length / 4;\r\n        while (len--) {\r\n            var id = len * 4 + 3;\r\n            var alpha = pixels[id] / 256;\r\n            var colorOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1));\r\n            pixels[id - 3] = gradient[colorOffset * 4]; // red\r\n            pixels[id - 2] = gradient[colorOffset * 4 + 1]; // green\r\n            pixels[id - 1] = gradient[colorOffset * 4 + 2]; // blue\r\n            pixels[id] *= this.option.opacity;\r\n            pixels[id] = pixels[id] > 50 ? pixels[id] : 50; // alpha\r\n        }\r\n        ctx.putImageData(imageData, 0, 0);\r\n\r\n        return canvas;\r\n    },\r\n    getCanvasData: function (ctx, data) {\r\n        var _cache = this.cache;\r\n        var r = BRUSH_SIZE + this.option.blurSize;\r\n        var d = 2 * r;\r\n        var len = data.length;\r\n        return data.map(function (p) {\r\n            var x = p[0];\r\n            var y = p[1];\r\n            var v = p[2];\r\n            var key = x + '-' + y + '-' + v;\r\n            return _cache[key] || (_cache[key] = ctx.getImageData(x - r, y - r, d, d));\r\n        })\r\n    },\r\n    refreshCanvas: function (canvas, data, dx, dy, width, height) {\r\n        if (canvas == null) return;\r\n        var ctx = canvas.getContext('2d');\r\n        var brush = this._getBrush();\r\n        var gradient = this._getGradient();\r\n        var r = BRUSH_SIZE + this.option.blurSize;\r\n        dx = Math.floor(dx ? (dx - r) : 0);\r\n        dy = Math.floor(dy ? (dy - r) : 0);\r\n        width = Math.ceil(width ? (width + 2 * r) : canvas.width);\r\n        height = Math.ceil(height ? (height + 2 * r) : canvas.height);\r\n        ctx.clearRect(dx, dy, width, height);\r\n        var maxX = dx + width;\r\n        var maxY = dy + height;\r\n        var len = data.length;\r\n        for (var i = 0; i < len; ++i) {\r\n            var p = data[i];\r\n            var x = p[0];\r\n            var y = p[1];\r\n            if (x < dx || y < dy || x > maxX || y > maxY) {\r\n                continue;\r\n            }\r\n            var value = p[2];\r\n            // calculate alpha using value\r\n            var alpha = Math.min(1, Math.max(value * this.option.valueScale ||\r\n                this.option.minAlpha, this.option.minAlpha));\r\n\r\n            // draw with the circle brush with alpha\r\n            ctx.globalAlpha = alpha;\r\n            ctx.drawImage(brush, x - r, y - r);\r\n        }\r\n\r\n        // colorize the canvas using alpha value and set with gradient\r\n        var imageData = ctx.getImageData(dx, dy, width, height);\r\n        var pixels = imageData.data;\r\n        var len = pixels.length / 4;\r\n        while (len--) {\r\n            var id = len * 4 + 3;\r\n            var alpha = pixels[id] / 256;\r\n            var colorOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1));\r\n            pixels[id - 3] = gradient[colorOffset * 4]; // red\r\n            pixels[id - 2] = gradient[colorOffset * 4 + 1]; // green\r\n            pixels[id - 1] = gradient[colorOffset * 4 + 2]; // blue\r\n            pixels[id] *= this.option.opacity;\r\n            pixels[id] = pixels[id] > 50 ? pixels[id] : 50; // alpha\r\n        }\r\n        ctx.putImageData(imageData, dx, dy);\r\n        return canvas;\r\n    },\r\n\r\n    /**\r\n     * get canvas of a black circle brush used for canvas to draw later\r\n     * @private\r\n     * @returns {Object} circle brush canvas\r\n     */\r\n    _getBrush: function () {\r\n        if (!this._brushCanvas) {\r\n            this._brushCanvas = document.createElement('canvas');\r\n\r\n            // set brush size\r\n            var r = BRUSH_SIZE + this.option.blurSize;\r\n            var d = r * 2;\r\n            this._brushCanvas.width = d;\r\n            this._brushCanvas.height = d;\r\n            Heatmap.DEFAULT_D = d;\r\n\r\n            var ctx = this._brushCanvas.getContext('2d');\r\n\r\n            // in order to render shadow without the distinct circle,\r\n            // draw the distinct circle in an invisible place,\r\n            // and use shadowOffset to draw shadow in the center of the canvas\r\n            ctx.shadowOffsetX = d;\r\n            ctx.shadowBlur = this.option.blurSize;\r\n            // draw the shadow in black, and use alpha and shadow blur to generate\r\n            // color in color map\r\n            ctx.shadowColor = 'black';\r\n\r\n            // draw circle in the left to the canvas\r\n            ctx.beginPath();\r\n            ctx.arc(-r, r, BRUSH_SIZE, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return this._brushCanvas;\r\n    },\r\n    /**\r\n     * get gradient color map\r\n     * @private\r\n     * @returns {array} gradient color pixels\r\n     */\r\n    _getGradient: function () {\r\n        if (!this._gradientPixels) {\r\n            var levels = GRADIENT_LEVELS;\r\n            var canvas = document.createElement('canvas');\r\n            canvas.width = 1;\r\n            canvas.height = levels;\r\n            var ctx = canvas.getContext('2d');\r\n\r\n            // add color to gradient stops\r\n            var gradient = ctx.createLinearGradient(0, 0, 0, levels);\r\n            var len = this.option.gradientColors.length;\r\n            for (var i = 0; i < len; ++i) {\r\n                if (typeof this.option.gradientColors[i] === 'string') {\r\n                    gradient.addColorStop((i + 1) / len,\r\n                        this.option.gradientColors[i]);\r\n                } else {\r\n                    gradient.addColorStop(this.option.gradientColors[i].offset,\r\n                        this.option.gradientColors[i].color);\r\n                }\r\n            }\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, 1, levels);\r\n            this._gradientPixels = ctx.getImageData(0, 0, 1, levels).data;\r\n        }\r\n        return this._gradientPixels;\r\n    }\r\n};\r\n\r\nHeatmap.setCanvasBackground = function (canvas, color) {\r\n    var ctx = canvas.getContext('2d');\r\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    var pixels = imageData.data;\r\n    var len = pixels.length / 4;\r\n    var alpha = color.a * 256;\r\n    while (len--) {\r\n        var id = len * 4 + 3;\r\n        // console.log(pixels);\r\n        if ((pixels[id - 3] + pixels[id - 2] + pixels[id - 1] + pixels[id]) === 0) {\r\n            pixels[id - 3] = color.r; // red\r\n            pixels[id - 2] = color.g; // green\r\n            pixels[id - 1] = color.b; // blue\r\n            pixels[id] = alpha; // alpha\r\n        }\r\n    }\r\n    ctx.putImageData(imageData, 0, 0);\r\n    return canvas;\r\n}\r\n\r\n\r\nexport default Heatmap;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}